"use strict";(()=>{var Ae=Object.create;var he=Object.defineProperty;var Me=Object.getOwnPropertyDescriptor;var He=Object.getOwnPropertyNames;var $e=Object.getPrototypeOf,Ve=Object.prototype.hasOwnProperty;var Re=(o=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(o,{get:(e,t)=>(typeof require!="undefined"?require:e)[t]}):o)(function(o){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+o+'" is not supported')});var Ue=(o,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of He(e))!Ve.call(o,n)&&n!==t&&he(o,n,{get:()=>e[n],enumerable:!(s=Me(e,n))||s.enumerable});return o};var ze=(o,e,t)=>(t=o!=null?Ae($e(o)):{},Ue(e||!o||!o.__esModule?he(t,"default",{value:o,enumerable:!0}):t,o));var $=class{constructor(e,t,s,n){this.progressInterval=0;this.audio=e,this.playPauseBtn=t,this.progressSlider=s,this.track=n,this.dragging=!1,this.progressInterval=0,this.audio.volume=.3,this.playPauseBtn.addEventListener("click",i=>this.playPauseAudio(i)),this.progressSlider.addEventListener("mousedown",i=>this.mouseDown(i)),document.addEventListener("mousemove",i=>this.mouseMove(i)),document.addEventListener("mouseup",()=>this.mouseUp())}playPauseAudio(e){e.stopPropagation(),this.audio.paused?(this.audio.play(),this.playPauseBtn.innerHTML=`
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                <rect x="2.5" y="1.5" width="4" height="13" rx="1.5" stroke="white"/>
                <rect x="9.5" y="1.5" width="4" height="13" rx="1.5" stroke="white"/>
            </svg>
            `,this.progressInterval=setInterval(()=>{if(!this.dragging){let t=this.audio.currentTime/this.audio.duration*100;this.track.style.width=t+"%",t>=100&&this.finishAudio()}},1e3)):(this.audio.pause(),this.playPauseBtn.innerHTML=`
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                <path d="M13.3375 10.8944L21.7598 15.1056C22.4968 15.4741 22.4968 16.5259 21.7598 16.8944L13.3375 21.1056C12.3402 21.6042 11.1667 20.879 11.1667 19.7639V12.2361C11.1667 11.121 12.3402 10.3958 13.3375 10.8944Z" stroke="white"/>
            </svg>`,clearInterval(this.progressInterval))}pauseAudio(){this.audio.pause(),this.playPauseBtn.innerHTML=`
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
            <path d="M13.3375 10.8944L21.7598 15.1056C22.4968 15.4741 22.4968 16.5259 21.7598 16.8944L13.3375 21.1056C12.3402 21.6042 11.1667 20.879 11.1667 19.7639V12.2361C11.1667 11.121 12.3402 10.3958 13.3375 10.8944Z" stroke="white"/>
        </svg>`,clearInterval(this.progressInterval)}mouseDown(e){this.dragging=!0,clearInterval(this.progressInterval),this.updateProgress(e)}mouseMove(e){this.dragging&&this.updateProgress(e)}mouseUp(){this.dragging=!1,this.progressInterval=setInterval(()=>{if(!this.dragging){let e=this.audio.currentTime/this.audio.duration*100;this.track.style.width=e+"%",e>=100&&this.finishAudio()}},1e3)}updateProgress(e){let t=this.progressSlider.getBoundingClientRect(),s=e.clientX-t.left,n=t.right-t.left,i=Math.min(Math.max(s/n,0),1)*100;this.track.style.width=i+"%",this.audio.currentTime=this.audio.duration*(i/100),i>=100&&this.finishAudio()}finishAudio(){this.playPauseBtn.innerHTML=`
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
            <path d="M13.3375 10.8944L21.7598 15.1056C22.4968 15.4741 22.4968 16.5259 21.7598 16.8944L13.3375 21.1056C12.3402 21.6042 11.1667 20.879 11.1667 19.7639V12.2361C11.1667 11.121 12.3402 10.3958 13.3375 10.8944Z" stroke="white"/>
        </svg>`}},f=class{constructor(e,t,s,n=!1){this.containerId="";this.audioPlayer=null;this.name="";this.containerId=e,this.container=document.getElementById(e),this.audioSrc=t,this.name=s,n?this.initializeSquarePlayer():this.initializePlayer()}initializePlayer(){if(!this.container)return;this.container.classList.add("aiornot-player"),this.container.innerHTML=`
            <audio id="${this.container.id}-audio" src="${this.audioSrc}"></audio>
            <div class="aiornot-player-controls">
                <div class="aiornot-player-button" id="${this.container.id}-playPauseBtn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                        <path d="M13.3375 10.8944L21.7598 15.1056C22.4968 15.4741 22.4968 16.5259 21.7598 16.8944L13.3375 21.1056C12.3402 21.6042 11.1667 20.879 11.1667 19.7639V12.2361C11.1667 11.121 12.3402 10.3958 13.3375 10.8944Z" stroke="white"/>
                    </svg>
                </div>
                <div class="aiornot-player-hover-bg"></div>
                <div class="aiornot-player-title">${this.name}</div>
            </div>
            <div id="${this.container.id}-slider" class="aiornot-player-slider">
                <div id="${this.container.id}-progress" class="aiornot-player-progress"></div>
            </div>
        `;let e=document.getElementById(`${this.container.id}-audio`),t=document.getElementById(`${this.container.id}-playPauseBtn`),s=document.getElementById(`${this.container.id}-slider`),n=document.getElementById(`${this.container.id}-progress`);this.audioPlayer=new $(e,t,s,n)}initializeSquarePlayer(){if(!this.container)return;this.container.classList.add("aiornot-player-square"),this.container.innerHTML=`
            <audio id="${this.container.id}-audio" src="${this.audioSrc}"></audio>
            <div class="aiornot-player-controls-square">
                <div class="aiornot-player-button-sqaure" id="${this.container.id}-playPauseBtn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                        <path d="M13.3375 10.8944L21.7598 15.1056C22.4968 15.4741 22.4968 16.5259 21.7598 16.8944L13.3375 21.1056C12.3402 21.6042 11.1667 20.879 11.1667 19.7639V12.2361C11.1667 11.121 12.3402 10.3958 13.3375 10.8944Z" stroke="white"/>
                    </svg>
                </div>
                <div class="aiornot-player-hover-bg"></div>
                <div class="aiornot-player-title-sqaure">${this.name}</div>
            </div>
            <div id="${this.container.id}-slider" class="aiornot-player-slider">
                <div id="${this.container.id}-progress" class="aiornot-player-progress"></div>
            </div>
        `;let e=document.getElementById(`${this.container.id}-audio`),t=document.getElementById(`${this.container.id}-playPauseBtn`),s=document.getElementById(`${this.container.id}-slider`),n=document.getElementById(`${this.container.id}-progress`);this.audioPlayer=new $(e,t,s,n)}},V=class{constructor(e=[]){this.players=[],e.forEach(t=>{this.addPlayer(t)})}addPlayer(e){var t;this.players.push(e),(t=e.audioPlayer)==null||t.audio.addEventListener("play",()=>this.pauseOtherPlayers(e))}pauseOtherPlayers(e){var t;for(let s of this.players)s!==e&&((t=s.audioPlayer)==null||t.pauseAudio())}};var G=class{constructor(e,t,s){this.progressInterval=0;this.playPauseBtn=e,this.progressSlider=t,this.track=s,this.dragging=!1,this.progressInterval=0,this.initListeners()}initListeners(){this.playPauseBtn.addEventListener("click",()=>this.playPauseVideo()),this.progressSlider.addEventListener("mousedown",e=>this.mouseDown(e)),document.addEventListener("mousemove",e=>this.mouseMove(e)),document.addEventListener("mouseup",()=>this.mouseUp())}onYouTubeIframeAPIReady(e){this.player=new YT.Player("youtube-player",{height:"48",width:"48",videoId:e,events:{onReady:()=>this.onPlayerReady(),onStateChange:t=>this.onPlayerStateChange(t)}})}onPlayerReady(){this.player.setVolume(30)}playPauseVideo(){let e=this.player.getPlayerState();e===YT.PlayerState.ENDED&&(this.player.seekTo(0),this.player.playVideo()),e===YT.PlayerState.PAUSED||e===YT.PlayerState.CUED?(this.player.playVideo(),this.playPauseBtn.innerHTML=` <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                <rect x="2.5" y="1.5" width="4" height="13" rx="1.5" stroke="white"/>
                <rect x="9.5" y="1.5" width="4" height="13" rx="1.5" stroke="white"/>
            </svg>`,this.progressInterval=setInterval(()=>{if(!this.dragging){let t=this.player.getCurrentTime()/this.player.getDuration()*100;this.track.style.width=t+"%",t>=100&&this.finishVideo()}},1e3)):(this.player.pauseVideo(),this.playPauseBtn.innerHTML=`
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                <path d="M13.3375 10.8944L21.7598 15.1056C22.4968 15.4741 22.4968 16.5259 21.7598 16.8944L13.3375 21.1056C12.3402 21.6042 11.1667 20.879 11.1667 19.7639V12.2361C11.1667 11.121 12.3402 10.3958 13.3375 10.8944Z" stroke="white"/>
            </svg>`,clearInterval(this.progressInterval))}onPlayerStateChange(e){e.data===YT.PlayerState.ENDED&&this.finishVideo()}mouseDown(e){this.dragging=!0,clearInterval(this.progressInterval),this.updateProgress(e)}mouseMove(e){this.dragging&&this.updateProgress(e)}mouseUp(){this.dragging=!1,this.progressInterval=setInterval(()=>{if(!this.dragging){let e=this.player.getCurrentTime()/this.player.getDuration()*100;this.track.style.width=e+"%",e>=100&&this.finishVideo()}},1e3)}updateProgress(e){let t=this.progressSlider.getBoundingClientRect(),s=e.clientX-t.left,n=t.right-t.left,i=Math.min(Math.max(s/n,0),1)*100;this.track.style.width=i+"%",this.player.seekTo(this.player.getDuration()*(i/100)),i>=100&&this.finishVideo()}finishVideo(){this.playPauseBtn.innerHTML=`
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
            <path d="M13.3375 10.8944L21.7598 15.1056C22.4968 15.4741 22.4968 16.5259 21.7598 16.8944L13.3375 21.1056C12.3402 21.6042 11.1667 20.879 11.1667 19.7639V12.2361C11.1667 11.121 12.3402 10.3958 13.3375 10.8944Z" stroke="white"/>
        </svg>`,clearInterval(this.progressInterval)}},J=class{constructor(e,t,s){this.containerId="";this.videoId="";this.youtubePlayer=null;this.name="";this.containerId=e,this.container=document.getElementById(e),this.videoId=t,this.name=s,this.initializePlayer()}async loadYouTubeIframeAPI(){return new Promise((e,t)=>{var i;window.onYouTubeIframeAPIReady=()=>{e()};let s=document.createElement("script");s.src="https://www.youtube.com/iframe_api",s.onerror=t;let n=document.getElementsByTagName("script")[0];(i=n.parentNode)==null||i.insertBefore(s,n)})}async initializePlayer(){if(!this.container)return;this.container.classList.add("aiornot-player-square"),this.container.innerHTML=`
            <div id="youtube-player"></div>
            <div class="aiornot-player-controls-square">
                <div class="aiornot-player-button-sqaure" id="${this.container.id}-playPauseBtn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                        <path d="M13.3375 10.8944L21.7598 15.1056C22.4968 15.4741 22.4968 16.5259 21.7598 16.8944L13.3375 21.1056C12.3402 21.6042 11.1667 20.879 11.1667 19.7639V12.2361C11.1667 11.121 12.3402 10.3958 13.3375 10.8944Z" stroke="white"/>
                    </svg>
                </div>
                <div class="aiornot-player-hover-bg"></div>
                <div class="aiornot-player-title-sqaure">${this.name}</div>
            </div>
            <div id="${this.container.id}-slider" class="aiornot-player-slider">
                <div id="${this.container.id}-progress" class="aiornot-player-progress"></div>
            </div>
        `;let e=document.getElementById(`${this.container.id}-playPauseBtn`),t=document.getElementById(`${this.container.id}-slider`),s=document.getElementById(`${this.container.id}-progress`);await this.loadYouTubeIframeAPI(),this.youtubePlayer=new G(e,t,s),this.youtubePlayer.onYouTubeIframeAPIReady(this.videoId)}},ye=(o,e)=>{let s=(n=>{var i;try{let c=new URL(n),g=new URLSearchParams(c.search).get("v"),T=/^(?:https?:\/\/)?(?:www\.)?youtu(?:be)?\.(?:com|be)\/(?:shorts\/)?([^\/?]+)/.exec(n);return(i=g!=null?g:T==null?void 0:T[0])!=null?i:""}catch(c){return console.error("\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 URL",c),""}})(e);new J(o,s,"")};var ge,De=import("https://openfpcdn.io/fingerprintjs/v3").then(o=>o.load()),K=async()=>{ge=await De.then(o=>o.get()).then(o=>o.visitorId)};function fe(o){var e=o.split(".")[1],t=e.replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(atob(t).split("").map(function(n){return"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(s)}var d="https://api.ai-or-not.com",R="https://results.aiornot.com",I=class{constructor(e,t){this.apiUrl=e,this.bearerToken=t}async get(e){let t=`${this.apiUrl}/${e}`;try{let s=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.bearerToken}`}});return await this.handleResponse(s)}catch(s){throw s.status===429&&s.message.msg.type==="requests"&&alert(`It looks like you have reached your plan limit of ${s.message.msg.current_limit} requests. To continue, please upgrade to a new plan.`),console.error("Error",s),s}}async post(e,t){let s=`${this.apiUrl}/${e}`;try{let n=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.bearerToken}`},body:JSON.stringify(t)});return await this.handleResponse(n)}catch(n){throw console.error("Request error",n),n.status===429&&n.message.msg.type==="requests"&&alert(`It looks like you have reached your plan limit of ${n.message.msg.current_limit} requests. To continue, please upgrade to a new plan.`),n}}async postBinary(e,t){let s=`${this.apiUrl}/${e}`;console.log("url",s);try{let n=await fetch(s,{method:"POST",headers:{Accept:"application/json",Authorization:`Bearer ${this.bearerToken}`},body:t});return await this.handleResponse(n)}catch(n){throw console.error("Binary request error:",n),n.status===429&&n.message.msg.type==="requests"&&alert(`It looks like you have reached your plan limit of ${n.message.msg.current_limit} requests. To continue, please upgrade to a new plan.`),n}}async delete(e){let t=`${this.apiUrl}/${e}`;try{let s=await fetch(t,{method:"DELETE",headers:{accept:"*/*",Authorization:`Bearer ${this.bearerToken}`}});await this.handleResponse(s)}catch(s){throw console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0432\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u0438 DELETE-\u0437\u0430\u043F\u0440\u043E\u0441\u0430:",s),s}}async patch(e,t){let s=`${this.apiUrl}/${e}`;try{let n=await fetch(s,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.bearerToken}`},body:JSON.stringify(t)});return await this.handleResponse(n)}catch(n){throw console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0432\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u0438 PATCH-\u0437\u0430\u043F\u0440\u043E\u0441\u0430:",n),n}}async handleResponse(e){if(!e.ok){let t=await e.json();throw{status:e.status,message:t}}if(e.status!==204)return await e.json()}};var u=class{constructor(){let e=l.getToken(),t=`${d}/aion/users`;this.client=new I(t,e)}static getInstance(){return u.instance||(u.instance=new u),u.instance}static async fetchRequests(e=0,t=10){try{let{client:s}=u.getInstance(),n=`data?filters=requests&offset=${e}&limit=${t}`;return await s.get(n).then(i=>i.requests.array)}catch(s){return console.error("getRequests:",s),[]}}static async fetchUsageApi(){try{let{client:e}=u.getInstance(),t="data?filters=all&offset=0&limit=1";return await e.get(t).then(s=>s.api)}catch(e){return console.error("fetchUsageApi:",e),[]}}static async signUp(){try{let{client:e}=u.getInstance();return await e.post("sign_up",{}).then(()=>!1).catch(t=>{if(t.status===400)return!0;throw t})}catch(e){return console.error("signUp:",e),!1}}static async login(){try{let{client:e}=u.getInstance();return await e.get("login")}catch(e){console.error("login:",e)}}static async delete(){try{let{client:e}=u.getInstance();return await e.delete("")}catch(e){console.error("delete:",e)}}static async fetchApiToken(){try{let{client:e}=u.getInstance();return await e.post("api_token",{})}catch(e){console.error("fetchApiToken:",e),console.error("fetchApiToken:",e)}}static async refreshApiToken(){try{let{client:e}=u.getInstance();return await e.patch("api_token",{})}catch(e){console.error("refreshApiToken:",e)}}static async fetchSubscriptionData(){let{client:e}=u.getInstance();try{let t="data?filters=all&offset=0&limit=1";return await e.get(t).then(s=>s)}catch(t){console.error("fetchSubscriptionData:",t)}}},m=u;m.instance=null;var v=class{constructor(){}static isAuth(){return localStorage.getItem(v.token_key)!==null}static setAuth(){localStorage.setItem(v.key,"true")}static removeAuth(){localStorage.removeItem(v.key)}static async init(){v.isAuth()?(await m.signUp(),v.setAuth(),await m.login()):(await m.signUp(),v.setAuth(),await m.login())}static getToken(){var e;return(e=localStorage.getItem("_ms-mid"))!=null?e:""}static isExpiredToken(){let e=v.getToken();if((e==null?void 0:e.length)>0){let t=fe(e),s=Date.now()/1e3;return t.exp<s}return!0}static checkAuth(e){if(!v.isAuth()){let t=document.getElementById("sign-up");return t.style.display="flex",t.style.zIndex=100,e(),!0}return!1}},l=v;l.key="isSignUp",l.token_key="_ms-mid";var E=class{constructor(){let e=l.getToken(),t=`${d}/aion/ai-generated`;this.client=new I(t,e)}static getInstance(){return E.instance||(E.instance=new E),E.instance}static async getReportsByBinary(e){let{client:t}=E.getInstance();try{let s=new FormData;return s.append("binary",e,"uploaded-file.png"),await t.postBinary("reports/binary",s)}catch(s){s.status===402&&alert("Please verify your email to continue using the service"),s.status===429&&(alert(`You have reached the limit of requests per day. Alert: ${JSON.stringify(s.message)}`),window.location.href=`https://${window.location.host}/#plans`),console.error("Error getReportsByBinary:",s)}}static async getReportsByUrl(e){let{client:t}=E.getInstance();try{let s=`reports/url?url=${e}`;return await t.post(s,{})}catch(s){s.status===402&&alert("Please verify your email to continue using the service"),console.error("getReportsByUrl:",s)}}static async getAudioVerdict(e){console.log("getAudioVerdict");let{client:t}=E.getInstance();try{let s=new FormData;return s.append("file",e),await t.postBinary("reports/audio/binary",s)}catch(s){s.status===402&&alert("Please verify your email to continue using the service"),console.error("Error getAudioVerdict:",s)}}static async getYoutubeVerdict(e){let{client:t}=E.getInstance();try{let s={url:e};return await t.post("reports/audio/link",s)}catch(s){s.status===402&&alert("Please verify your email to continue using the service"),console.error("Error getYoutubeVerdict:",s)}}},k=E;k.instance=null;var q=class{constructor(){}static async getReportsByBinary(e,t){let s=`${d}/results/api/detector/reports/raw?source=web&user_id=${t}`,n=new FormData;n.append("binary",e,"file_name.png");let i={method:"POST",headers:{Accept:"application/json",Authorization:`Bearer ${l.getToken()}`},body:n};return await fetch(s,i).then(c=>c.json())}static async getReportsByUrl(e,t){let s=`${d}/results/api/detector/reports/json?source=web&user_id=${t}`,n={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${l.getToken()}`},body:JSON.stringify({object:e})};return await fetch(s,n).then(i=>i.json())}static async sendFeedback(e,t,s,n=!1){let i={is_proper_predict:t,comment:s},c=`${d}/results/api/detector/reports/result/${e}`,g={method:"PUT",body:JSON.stringify(i),headers:{Accept:"application/json","Content-Type":"application/json"}};(n||!l.isExpiredToken())&&(c=`${d}/aion/ai-generated/reports/${e}`,g={method:"PATCH",body:JSON.stringify(i),headers:{Accept:"application/json","Content-Type":"application/json"}}),await fetch(c,g).then(h=>h.json()).then(h=>console.log(h)).catch(h=>console.error(h))}static async getAudioVerdict(e){let t=`${d}/aion/ai-generated/reports/audio/binary`,s=new FormData;return s.append("file",e),await fetch(t,{method:"POST",headers:{Accept:"application/json",ContentType:"multipart/form-data"},body:s}).then(i=>i.json())}static async getYoutubeVerdict(e){let t=`${d}/aion/ai-generated/reports/audio/link`,s={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({url:e})};return await fetch(t,s).then(n=>n.json())}};var U=class{constructor(){}static isLimitExceeded(){return!!l.isExpiredToken()}static increment(){let e=localStorage.getItem(U.key),t=e===null?1:Number(e)+1;localStorage.setItem(U.key,t.toString())}},B=U;B.key="requestCount";var w=class{static async getReportsByBinary(e,t){return l.isExpiredToken()?await q.getReportsByBinary(e,t):await k.getReportsByBinary(e)}static async getReportsByUrl(e,t){return l.isExpiredToken()?await q.getReportsByUrl(e,t):await k.getReportsByUrl(e)}static async getAudioVerictByFile(e){return await k.getAudioVerdict(e)}static async getAudioVerictMock(e){let s=await((n,i)=>new Promise(c=>{setTimeout(()=>{c(i)},n)}))(1500,e);return JSON.parse(`{
            "id": "41994fdd-0161-43a9-b873-581eccbe6d72",
            "report": {
                "version": "0.0.0",
                "verdict": ${s}
            }
        }`)}static async getYoutubeVerict(e){return l.isExpiredToken()?await q.getYoutubeVerdict(e):await k.getYoutubeVerdict(e)}static async sendFeedback(e,t,s,n=!1){return await q.sendFeedback(e,t,s,n)}};var ve=()=>{var me,pe;let o=document.getElementById("image-tab"),e=document.getElementById("audio-tab"),t=document.getElementById("report-screen"),s=document.querySelector("#button-report-submit"),n=document.querySelector("#input-report-comment"),i=document.querySelector("#button-report_true"),c=document.querySelector("#button-report_false"),g=document.querySelector("#button-report_close"),h=document.querySelector("#url-error-message"),T=document.querySelector("#processing_cancel"),p=document.querySelector("#audio-file-input"),F=document.querySelector("#input-error-text"),L=document.getElementById("ai-or-not_audio-url"),P=document.getElementById("audio-aion-submit"),re=document.querySelector("#ai-or-not-audio_dropzone"),b=document.querySelector("#ai-or-not_dropzone-text"),oe=document.querySelector("#audio-result-screen_col"),be=document.querySelector("#share-items-hide"),Xe=document.querySelector("#result-screen_share-component"),Qe=document.querySelector("#ai-or-not-dropzone-counter"),et=document.querySelector("#ai-or-not-dropzone-counter-w"),_,j;be.classList.add("hide");function ie(){return o.classList.contains("w--current")?"image":"audio"}K();let Ce=()=>{n.value="";let r=document.querySelector("#button-report_true-text"),a=document.querySelector("#button-report_false-text");a.classList.add("hide"),r.classList.remove("hide"),r.textContent=r.getAttribute("report-button-text-default"),a.textContent=a.getAttribute("report-button-text-default"),i.classList.remove("is-reported"),c.classList.remove("is-reported"),i.classList.remove("hide"),c.classList.remove("hide")},ae=r=>{j=r;let a=document.querySelector('[fs-socialshare-element="url"]'),x=`${l.isExpiredToken()?`${R}/aiornot/`:`${R}/aiornot/users/`}${r}`;a.textContent=x,document.querySelectorAll(".audio-result-screen_share-item").forEach(Pe=>{Pe.setAttribute("data-url",x)})},le=()=>{b.textContent="We support 10 Mb of maximum size.",b.classList.remove("text-color-red"),F.textContent="Something went wrong. Try again.",h.classList.add("hide")},ce=()=>{h.classList.remove("hide")},tt=()=>{h.classList.add("hide")},H=()=>{oe.classList.contains("hide")?(b.textContent="File is too large (max 10 MB)",b.classList.add("text-color-red")):(F.textContent="File is too large (max 10 MB)",h.classList.remove("hide"))},xe=r=>{let a=URL.createObjectURL(r);new f("result-screen_audio-wrapper",a,r.name,!0)},ke=r=>{ye("result-screen_audio-wrapper",r)};p==null||p.addEventListener("change",()=>{if(console.log("audio change"),l.checkAuth(C))return;let r=p==null?void 0:p.files[0].size,a=10*1024*1024;r>a?(_=!1,H()):(_=!0,le())});let Te=()=>{document.querySelector("#processing-screen").classList.add("hide"),b.classList.add("error"),re.classList.add("red-border"),b.textContent="Something went wrong. Try again."},Z=()=>{b.classList.remove("error"),re.classList.remove("red-border"),b.textContent="We support jpeg, png, webp, gif, tiff, bmp. 10 Mb of maximum size."},C=()=>{document.querySelector("#choose-file-row").classList.add("hide"),document.querySelector("#legal-tip").classList.remove("hide"),document.querySelector("#processing-screen").classList.add("hide"),document.querySelector("#hero-home_title-description").classList.remove("hide"),document.querySelector("#hero-home_gallery").classList.remove("hide"),document.querySelector("#ai-or-not-audio_dropzone").classList.remove("hide"),document.querySelector("#hero-home_drop-zone-divider").classList.remove("hide"),document.querySelector("#audio-result-screen_col").classList.add("hide"),document.querySelector("#result-screen_audio-wrapper").classList.add("hide")},O=()=>{Ce(),F.textContent="Something went wrong. Try again.",document.querySelector("#choose-file-row").classList.remove("hide"),document.querySelector("#legal-tip").classList.add("hide"),document.querySelector(".processing-screen_triggers_5").click(),document.querySelector("#processing-screen").classList.remove("hide"),document.querySelector(".processing-screen_triggers_1").click(),document.querySelector("#hero-home_title-description").classList.add("hide"),document.querySelector("#hero-home_gallery").classList.add("hide"),document.querySelector("#ai-or-not-audio_dropzone").classList.add("hide"),document.querySelector("#hero-home_drop-zone-divider").classList.add("hide"),document.querySelector("#audio-result-screen_col").classList.remove("hide"),document.querySelector("#result-screen_audio-wrapper").classList.remove("hide")};function N(){var r,a;(r=document.querySelector(".processing-screen_triggers_3"))==null||r.click(),document.querySelector("#processing-screen").classList.add("hide"),(a=document.querySelector(".processing-screen_triggers_5"))==null||a.click(),document.querySelector("#audio-report-buttons-screen").classList.add("hide"),document.querySelector("#audio-share-items-hide").classList.add("hide"),document.querySelector("#audio-hero-home_drop-zone-divider").classList.add("hide"),document.querySelector("#audio-hero-home_title-description").classList.add("hide"),document.querySelector("#audio-hero-home_gallery").classList.add("hide"),p.value="",L.value=""}let Y=r=>{r==="unknown"?(document.getElementById("audio-title-human").innerHTML="Sorry, but in this case we can't really say if it's AI or Not",document.getElementById("audio-ai-or-not_result-message-50").classList.remove("hide"),document.getElementById("audio-ai-or-not_result-message").classList.add("hide"),document.getElementById("audio-ai-or-not_result-message-50").innerHTML="Probly the uploaded audio has most likely been modified or compressed",document.getElementById("audio-title-human").classList.remove("hide"),document.getElementById("audio-title-ai").classList.add("hide")):(document.getElementById("audio-title-ai").innerHTML='This is likely <span class="text-color-green">AI</span>',document.getElementById("audio-title-human").innerHTML='This is likely <span class="text-color-green">Human</span>',document.getElementById("audio-ai-or-not_result-message-50").classList.add("hide"),document.getElementById("audio-ai-or-not_result-message").classList.remove("hide"),document.querySelector("#audio-ai-or-not_model-name").textContent=r,r==="ai"?(document.getElementById("audio-title-human").classList.add("hide"),document.getElementById("audio-title-ai").classList.remove("hide")):(document.getElementById("audio-title-human").classList.remove("hide"),document.getElementById("audio-title-ai").classList.add("hide")))},de=async r=>{if(B.isLimitExceeded()){let a=document.getElementById("sign-up");a.style.display="flex",a.style.zIndex=100,C()}else h.classList.add("hide"),O(),await w.getYoutubeVerict(r).then(a=>{ae(a.id),Y(a.report.verdict===!0?"ai":"human"),N(),ke(r)}).catch(a=>{oe.classList.contains("hide")?ce():(ce(),C()),console.log(a)})},S=document.body,st=document.querySelector("#dropzone-fullscreen_message-tip"),nt=document.querySelector("#dropzone-fullscreen_message-format");S==null||S.addEventListener("dragover",function(r){r.preventDefault(),document.querySelector(".dropzone-fullscreen").classList.remove("hide")}),S==null||S.addEventListener("dragleave",function(r){r.preventDefault(),document.querySelector(".dropzone-fullscreen").classList.add("hide")}),S==null||S.addEventListener("drop",async function(r){if(l.checkAuth(C)){document.querySelector(".dropzone-fullscreen").classList.add("hide");return}if(ie()!=="audio")return;r.preventDefault(),document.querySelector(".dropzone-fullscreen").classList.add("hide");let a=r.dataTransfer.files[0],y=a.size,x=10*1024*1024;y>x?(_=!1,H()):(_=!0,le()),_==!0?await ue(a):H()}),p==null||p.addEventListener("change",async r=>{if(_==!0){let a=p.files[0];await ue(a)}else H()});let ue=async r=>{console.log(r.type),(r.type==="audio/mpeg"||r.type==="audio/mp3")&&(O(),await w.getAudioVerictByFile(r).then(a=>{console.log(a),Z(),Y(a.report.verdict===!0?"ai":"human"),N(),xe(r)}).catch(a=>{console.log(a),Te(),C()}))},qe=async(r,a)=>{l.checkAuth(C)||(O(),await w.getAudioVerictMock(!0).then(y=>{ae(y.id),Z(),Y(y.report.verdict===!0?"ai":"human"),N(),new f("result-screen_audio-wrapper",r,a,!0)}))};T==null||T.addEventListener("click",function(){Z(),C()}),(me=document.querySelector("#ai-or-not-audio_dropzone"))==null||me.addEventListener("click",function(){ie()==="audio"&&(l.checkAuth(C)||p.click())}),(pe=document.querySelector("#choose-file-row"))==null||pe.addEventListener("click",function(){p.click()}),P==null||P.addEventListener("click",()=>{L.value!=""&&(console.log("youtubeLinkInput.value"),de(L.value))}),L==null||L.addEventListener("keypress",r=>{r.key==="Enter"&&L.value!=""&&de(L.value)}),L.addEventListener("input",r=>{let a=r.target.value;(x=>/^(?:https?:\/\/)?(?:www\.)?(?:music\.)?youtu(?:be)?\.(?:com|be)\/(?:shorts\/)?([^\/?]+)/.test(x))(a)?P.classList.remove("is-disabled"):P.classList.add("is-disabled")});let _e=()=>{let r=document.querySelector("#button-report_false-text");r.classList.remove("hide"),r.textContent=r.getAttribute("report-button-text-default_reported"),c.classList.add("is-reported"),i.classList.add("hide"),t.style.display="none"},Ie=()=>{let r=document.querySelector("#button-report_true-text");r.classList.remove("hide"),r.textContent=r.getAttribute("report-button-text-default_reported"),i.classList.add("is-reported"),c.classList.add("hide")};i==null||i.addEventListener("click",()=>{Ie(),w.sendFeedback(j,!0,"",!0)}),c==null||c.addEventListener("click",()=>{t.style.display="flex"}),g==null||g.addEventListener("click",()=>{t.style.display="none"}),s==null||s.addEventListener("click",()=>{_e(),w.sendFeedback(j,!1,n.value,!0)}),document==null||document.addEventListener("keydown",r=>{r.code==="Escape"&&t.style.display!=="none"&&g.click()}),n==null||n.addEventListener("change",()=>{n.value!=""?s.classList.remove("is-disabled"):s.classList.add("is-disabled")}),n==null||n.addEventListener("input",()=>{n.value!=""?s.classList.remove("is-disabled"):s.classList.add("is-disabled")}),new V([new f("audio-sample-1","https://atrium-junk.s3.amazonaws.com/ai-or-not-audio-samples/Adel","Adel"),new f("audio-sample-2","https://atrium-junk.s3.amazonaws.com/ai-or-not-audio-samples/Bull+Greek.mp3","Bull Greek"),new f("audio-sample-3","https://atrium-junk.s3.amazonaws.com/ai-or-not-audio-samples/Sample+1.mp3","Sample 1"),new f("audio-sample-4","https://atrium-junk.s3.amazonaws.com/ai-or-not-audio-samples/Sample+2.mp3","Sample 2"),new f("audio-sample-5","https://atrium-junk.s3.amazonaws.com/ai-or-not-audio-samples/Sample+3.mp3","Sample 3"),new f("audio-sample-6","https://atrium-junk.s3.amazonaws.com/ai-or-not-audio-samples/Trump+speech.mp3","Trump speech")]).players.forEach(r=>{var a;(a=r.container)==null||a.addEventListener("click",async()=>{var y;(y=r.audioPlayer)!=null&&y.audio.paused&&qe(r.audioSrc,r.name)})});let W=document.getElementById("close-sign-up");W==null||W.addEventListener("click",()=>{let r=document.getElementById("sign-up");r.style.display="none",r.style.zIndex=0});let A=document.querySelector("#audio-quotas");l.isAuth()?m.fetchSubscriptionData().then(r=>{var a;if(r){let{quantity:y}=((a=r.plan)==null?void 0:a.requests_limits)||{quantity:20},{total:x}=r.requests;A.innerHTML=`
            <div style="margin-top: 20px; font-size: 1rem; color: white">
            <span">
                Available ${y-x} from ${y} requests 
            </span>
            </div>`}else A.textContent=""}):(A.textContent="Please Sign in to see your usage",A.style.color="white",A.style.marginTop="20px")};var X=document.querySelector("#contact-us-submit-button"),Fe=document.querySelector("#name"),je=document.querySelector("#E-Mail"),Ze=document.querySelector("#Note"),Oe=document.querySelector("#Company");X&&(X.classList.remove("is-disabled"),X.addEventListener("click",async o=>{o.preventDefault();let e={name:Fe.value,email:je.value,note:Ze.value,company:Oe.value};for(let t in e)if(t!=="company"&&e[t]===""){alert(`Please fill in all required fields ${t}`);return}console.log(e),fetch(`${d}/aion/system/post_message`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(t=>{t.ok?(alert("Thank you for your application! We will contact you shortly."),window.location.href="https://aiornot.webflow.io/"):alert("Something went wrong. Please try again.")})}));var we="https://js.stripe.com/v3",Ne=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,Ee="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",Ye=function(){for(var e=document.querySelectorAll('script[src^="'.concat(we,'"]')),t=0;t<e.length;t++){var s=e[t];if(Ne.test(s.src))return s}return null},We=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",s=document.createElement("script");s.src="".concat(we).concat(t);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(s),s},Ge=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"2.1.7",startTime:t})},z=null,Je=function(e){return z!==null||(z=new Promise(function(t,s){if(typeof window=="undefined"||typeof document=="undefined"){t(null);return}if(window.Stripe&&e&&console.warn(Ee),window.Stripe){t(window.Stripe);return}try{var n=Ye();n&&e?console.warn(Ee):n||(n=We(e)),n.addEventListener("load",function(){window.Stripe?t(window.Stripe):s(new Error("Stripe.js not available"))}),n.addEventListener("error",function(){s(new Error("Failed to load Stripe.js"))})}catch(i){s(i);return}})),z},Ke=function(e,t,s){if(e===null)return null;var n=e.apply(void 0,t);return Ge(n,s),n},Le=Promise.resolve().then(function(){return Je(null)}),Se=!1;Le.catch(function(o){Se||console.warn(o)});var Q=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];Se=!0;var n=Date.now();return Le.then(function(i){return Ke(i,t,n)})};var D=class{constructor(){this.elements=null;this.stripe=null;this.home_element=document.querySelector("#home");this.PRODUCT_ID_BASE_PLAN={id:"price_1O2Ba4Ba9yG4sk8k4y3ZnEVT",msg:"Base plan: $30/month"};this.PRODUCT_ID_PRO_PLAN={id:"price_1O2Ku4Ba9yG4sk8kIQBdzpPj",msg:"Pro plan: $250/month"}}createPaymentForm(e){this.home_element.innerHTML=`
        <div style="background: white; position: fixed; top: 0; left: 0; right: 0; bottom: 0; display: flex; flex-direction: column; justify-content: center; align-items: center">
            <div style="width: 100%; display: flex; justify-content: center; align-items: center">
                <h2 style="color: black; font-size: 2.5rem; justify-content: center">AI or Not</h2>
                <br>
                <br>
                <br>
            </div>
        
           <div class="payment-container">
           <div class="sr-root" style="display: flex; flex-direction: row; align-items: center; justify-content: center; min-width: 380px">
            <div class="sr-main">
                <h2 style="color: black; font-size: 2.5rem; justify-content: center">${e}</h2>
                <br>
                <form id="payment-form" style="min-width: 380px">
                    <div id="payment-element"></div>
                    <br>
                    // Add callback function
                    <button class="button" style="width: 100%" id="submit">
                        <div class="spinner hidden" id="spinner"></div>
                        <span style="width: 100 %;" id="button-text">Pay</span>
                    </button>
                </form>
            </div>
        </div>
        </div>
        </div>
    `,document.querySelector("#submit").addEventListener("click",()=>{console.log("test"),this.completePayment()})}async createPaymentIntent(e){fetch(`${d}/aion/payments/config`).then(t=>t.json()).then(t=>{Q(t.stripe_public_key).then(s=>{this.stripe=s,fetch(`${d}/aion/payments/create_intent`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.checkUserToken()}`},body:JSON.stringify({product_id:e.id})}).then(n=>n.json()).then(n=>{if(n.code===10)throw console.warn(n.message),alert(n.message),window.location.href=`https://${window.location.host}/`,new Error(n.message);this.createPaymentForm(e.msg),this.elements=this.stripe.elements({clientSecret:n.client_secret}),this.elements.create("payment").mount("#payment-element")}).catch(n=>{console.error("Something wrong when create a payment intent",n),alert("Something wrong when create a payment. Please try again.")})})})}paymentCheckoutSession(e){fetch(`${d}/aion/payments/checkout_session`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.checkUserToken()}`},body:JSON.stringify({product_id:e,quantity:1,success_redirect_url:"https://aiornot.webflow.io/dashboard/history",cancel_redirect_url:"https://aiornot.webflow.io/new-home#pricing"})}).then(t=>t.json()).then(t=>{if(console.log(t),t.code===10)throw console.warn(t.message),alert(t.message),new Error(t.message);Q(t.checkout_public_key).then(s=>{if(!s){console.error("Something wrong when create a Stripe object");return}s.redirectToCheckout({sessionId:t.checkout_session_id})})}).catch(t=>{console.error("Something wrong when create a checkout session",t)})}checkUserToken(){let e=localStorage.getItem("_ms-mid");if(!e)throw new Error("User token not found");return e}completePayment(){console.log("completePayment"),console.log(this.elements),this.stripe.confirmPayment({elements:this.elements,confirmParams:{return_url:`https://${window.location.host}/dashboard/history`}}).then(e=>{e.error?(console.error(e.error.message),alert(e.error.message)):console.log(e)})}};var ee=document.querySelector("#bt-pay-free"),te=document.querySelector("#bt-pay-basic"),se=document.querySelector("#bt-pay-pro"),ne=document.querySelector("#bt-pay-enterprice"),M=new D;ee==null||ee.addEventListener("click",()=>{localStorage.getItem("_ms-mid")?window.location.href=`https://${window.location.host}/`:window.location.href=`https://${window.location.host}/signup`});te==null||te.addEventListener("click",()=>{m.fetchSubscriptionData().then(o=>{o.plan?alert("You already have a subscription !!!"):(M.createPaymentForm("Basic plan: $30/month"),M.createPaymentIntent(M.PRODUCT_ID_BASE_PLAN))})});se==null||se.addEventListener("click",()=>{m.fetchSubscriptionData().then(o=>{o.plan?alert("You already have a subscription !!!"):M.createPaymentIntent(M.PRODUCT_ID_PRO_PLAN)})});ne==null||ne.addEventListener("click",()=>{window.location.href=`https://${window.location.host}/contact-us`});ve();})();
