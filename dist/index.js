"use strict";(()=>{var Me=Object.create;var ye=Object.defineProperty;var He=Object.getOwnPropertyDescriptor;var $e=Object.getOwnPropertyNames;var Re=Object.getPrototypeOf,Ue=Object.prototype.hasOwnProperty;var Ve=(i=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(i,{get:(e,t)=>(typeof require!="undefined"?require:e)[t]}):i)(function(i){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+i+'" is not supported')});var ze=(i,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of $e(e))!Ue.call(i,n)&&n!==t&&ye(i,n,{get:()=>e[n],enumerable:!(s=He(e,n))||s.enumerable});return i};var De=(i,e,t)=>(t=i!=null?Me(Re(i)):{},ze(e||!i||!i.__esModule?ye(t,"default",{value:i,enumerable:!0}):t,i));var z,Fe=import("https://openfpcdn.io/fingerprintjs/v3").then(i=>i.load()),K=async()=>{z=await Fe.then(i=>i.get()).then(i=>i.visitorId)};function ge(i){var e=i.split(".")[1],t=e.replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(atob(t).split("").map(function(n){return"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(s)}var ve="https://js.stripe.com/v3",je=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,fe="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",Ye=function(){for(var e=document.querySelectorAll('script[src^="'.concat(ve,'"]')),t=0;t<e.length;t++){var s=e[t];if(je.test(s.src))return s}return null},Oe=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",s=document.createElement("script");s.src="".concat(ve).concat(t);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(s),s},Ze=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"2.1.7",startTime:t})},D=null,Ne=function(e){return D!==null||(D=new Promise(function(t,s){if(typeof window=="undefined"||typeof document=="undefined"){t(null);return}if(window.Stripe&&e&&console.warn(fe),window.Stripe){t(window.Stripe);return}try{var n=Ye();n&&e?console.warn(fe):n||(n=Oe(e)),n.addEventListener("load",function(){window.Stripe?t(window.Stripe):s(new Error("Stripe.js not available"))}),n.addEventListener("error",function(){s(new Error("Failed to load Stripe.js"))})}catch(r){s(r);return}})),D},We=function(e,t,s){if(e===null)return null;var n=e.apply(void 0,t);return Ze(n,s),n},we=Promise.resolve().then(function(){return Ne(null)}),Ee=!1;we.catch(function(i){Ee||console.warn(i)});var Le=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];Ee=!0;var n=Date.now();return we.then(function(r){return We(r,t,n)})};var u="http://localhost:8000",F="https://results.aiornot.com",H=class{constructor(e,t){this.apiUrl=e,this.bearerToken=t}async get(e){let t=`${this.apiUrl}/${e}`;try{let s=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.bearerToken}`}});return await this.handleResponse(s)}catch(s){throw console.error("Error",s),s}}async post(e,t){let s=`${this.apiUrl}/${e}`;try{let n=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.bearerToken}`},body:JSON.stringify(t)});return await this.handleResponse(n)}catch(n){throw console.error("Request error",n),n.status===429&&n.message.msg.type==="requests"&&alert(`It looks like you have reached your plan limit of ${n.message.msg.current_limit} requests. To continue, please upgrade to a new plan.`),n}}async postBinary(e,t){let s=`${this.apiUrl}/${e}`;try{let n=await fetch(s,{method:"POST",headers:{Accept:"application/json",Authorization:`Bearer ${this.bearerToken}`},body:t});return await this.handleResponse(n)}catch(n){throw console.error("Binary request error:",n),n.status===429&&n.message.msg.type==="requests"&&alert(`It looks like you have reached your plan limit of ${n.message.msg.current_limit} requests. To continue, please upgrade to a new plan.`),n}}async delete(e){let t=`${this.apiUrl}/${e}`;try{let s=await fetch(t,{method:"DELETE",headers:{accept:"*/*",Authorization:`Bearer ${this.bearerToken}`}});await this.handleResponse(s)}catch(s){throw console.error("Error when perform DELETE-request:",s),s}}async patch(e,t){let s=`${this.apiUrl}/${e}`;try{let n=await fetch(s,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.bearerToken}`},body:JSON.stringify(t)});return await this.handleResponse(n)}catch(n){throw console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0432\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u0438 PATCH-\u0437\u0430\u043F\u0440\u043E\u0441\u0430:",n),n}}async handleResponse(e){if(!e.ok){let t=await e.json();throw{status:e.status,message:t}}if(e.status!==204)return await e.json()}};var $=class{constructor(){this.elements=null;this.stripe=null;this.home_element=document.querySelector("#home");this.PRODUCT_ID_BASE_PLAN={id:"price_1O2Ba4Ba9yG4sk8k4y3ZnEVT",msg:"Base plan: $30/month",test_id:"price_1O1wSsBa9yG4sk8kej8shNYs"};this.PRODUCT_ID_PRO_PLAN={id:"price_1O2Ku4Ba9yG4sk8kIQBdzpPj",msg:"Pro plan: $250/month",test_id:"price_1O1wTVBa9yG4sk8kQSPeT9rp"};this.is_test_mode=!1}createPaymentForm(e){this.home_element.innerHTML=`



        <div style="background: white; position: fixed; top: 0; left: 0; right: 0; bottom: 0; display: flex; flex-direction: column; justify-content: center; align-items: center">
           <div class="payment-container" style="overflow-y: auto">
                <h2 style="color: black; font-size: 2.5rem; text-align: center">AI or Not</h2>
                <br>

           <div class="sr-root" style="display: flex; flex-direction: row; align-items: center; justify-content: center; min-width: 380px;">
            <div class="sr-main">
                <h3 style="color: black; font-size: 2.5rem; justify-content: center">${e}</h3>
                <br>
                <form id="payment-form" style="min-width: 380px">
                    <div id="payment-element"></div>
                    <br>
                    // Add callback function
                </form>
                
                    <button class="button" style="width: 100%; visibility: hidden" id="submit">
                        <span style="width: 100 %;" id="button-text">Pay</span>
                    </button>
                    <br>
            </div>
        </div>
        </div>
            <div id="progress-loader" class="loader" style="border: 16px solid #f3f3f3; border-top: 16px solid #adff00; border-bottom: 16px solid #adff00; border-radius: 50%;width: 120px;height: 120px;animation: spin 2s linear infinite;"></div>
        </div>
    `,document.querySelector("#submit").addEventListener("click",()=>{this.completePayment()})}async createPaymentIntent(e){fetch(`${u}/aion/payments/config`).then(t=>t.json()).then(t=>{Le(t.stripe_public_key).then(s=>{this.stripe=s,this.is_test_mode=t.stripe_public_key.includes("test"),fetch(`${u}/aion/payments/create_intent`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.checkUserToken()}`},body:JSON.stringify({product_id:this.is_test_mode?e.test_id:e.id})}).then(n=>n.json()).then(n=>{var a;if(n.code===10)throw console.warn(n.message),alert(n.message),window.location.href=`https://${window.location.host}/`,new Error(n.message);this.elements=this.stripe.elements({clientSecret:n.client_secret});let r=this.elements.create("payment");(a=document.querySelector("#progress-loader"))==null||a.classList.add("hide"),document.querySelector("#submit").style.visibility="visible",r.mount("#payment-element")}).catch(n=>{console.error("Something wrong when create a payment intent",n),alert("Something wrong when create a payment. Please try again.")})})})}checkUserToken(){let e=localStorage.getItem("_ms-mid");if(!e)throw new Error("User token not found");return e}completePayment(){var e,t;(e=document.querySelector("#progress-loader"))==null||e.classList.remove("hide"),document.querySelector("#submit").style.visibility="hidden",(t=document.querySelector("#payment-element"))==null||t.classList.add("hide"),this.stripe.confirmPayment({elements:this.elements,confirmParams:{return_url:`https://${window.location.host}/dashboard/settings`}}).then(s=>{s.error?(console.error(s.error.message),alert(s.error.message),window.location.href=`https://${window.location.host}/#plans`):console.log(s)})}async cancelSubscription(){fetch(`${u}/aion/payments/cancel_subscription`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.checkUserToken()}`}}).then(e=>e.json()).catch(e=>{console.error("Something wrong when create a checkout session",e)})}async getSubscriptionInfo(){try{let e=await fetch(`${u}/aion/payments/subscription`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.checkUserToken()}`}});return await this.handleResponse(e)}catch{return null}}async handleResponse(e){if(!e.ok){let t=await e.json();throw{status:e.status,message:t}}if(e.status!==204)return await e.json()}};var Se=new $,y=class{constructor(){let e=c.getToken(),t=`${u}/aion/users`;this.client=new H(t,e)}static getInstance(){return y.instance||(y.instance=new y),y.instance}static async fetchRequests(e=0,t=10){try{let{client:s}=y.getInstance(),n=`data?filters=requests&offset=${e}&limit=${t}`;return await s.get(n).then(r=>r.requests.array)}catch(s){return console.error("getRequests:",s),[]}}static async fetchUsageApi(){try{let{client:e}=y.getInstance(),t="data?filters=all&offset=0&limit=1";return await e.get(t).then(s=>s.api)}catch(e){return console.error("fetchUsageApi:",e),[]}}static async signUp(){try{let{client:e}=y.getInstance();return await e.post("sign_up",{}).then(()=>!1).catch(t=>{throw t})}catch(e){throw console.error("signUp:",e),e}}static async login(){try{let{client:e}=y.getInstance();return await e.get("login")}catch(e){console.error("login:",e)}}static async delete(){try{let{client:e}=y.getInstance();return c.removeAuth(),await e.delete("")}catch(e){console.error("delete:",e)}}static async fetchApiToken(){try{let{client:e}=y.getInstance();return await e.post("api_token",{})}catch(e){console.error("fetchApiToken:",e),console.error("fetchApiToken:",e)}}static async refreshApiToken(){try{let{client:e}=y.getInstance();return await e.patch("api_token",{})}catch(e){console.error("refreshApiToken:",e)}}static async fetchSubscriptionData(){let{client:e}=y.getInstance();try{let t="data?filters=all&offset=0&limit=1";return await e.get(t).then(s=>s)}catch(t){console.error("fetchSubscriptionData:",t)}}static async subscriptionInfo(){var f,g,m,w,C,_,I,l,p;let e=document.querySelector("#plan-info"),t=document.querySelector("#usage-info"),s=document.querySelector("#btn-cancel-plan");e.classList.add("hide"),t.classList.add("hide"),s.classList.add("hide");let n=[y.fetchSubscriptionData(),Se.getSubscriptionInfo()],[r,a]=await Promise.all(n);r!=null&&r.plan||(e.innerHTML=`You're on the <span class="text-color-green">Free</span> plan. You have limits of 20 & 100 checks per month via web & API, respectively. If you need more, check out our <a class="text-color-green" href='https://${window.location.host}/#plans' >plans</a>.`,t.innerHTML=`You have used ${(((f=r==null?void 0:r.requests)==null?void 0:f.total)||0)-(((m=(g=r==null?void 0:r.api)==null?void 0:g.usage)==null?void 0:m.daily)||0)} of 20 checks via web and ${((C=(w=r==null?void 0:r.api)==null?void 0:w.usage)==null?void 0:C.daily)||0} of 100 checks via API.`,e.classList.remove("hide"),t.classList.remove("hide")),(r==null?void 0:r.plan.requests_limits.quantity)===1e3&&(e.innerHTML=`You're on the <span class="text-color-green">Base</span> plan. You have limits of 1000 requests for both web & API.`,t.innerHTML=`You have used ${((_=r==null?void 0:r.requests)==null?void 0:_.total)||0} of 1000 checks via both web API.`,(I=a==null?void 0:a.subscription.meta)!=null&&I.was_canceled?(s.classList.add("hide"),t.innerHTML=t.innerHTML+` Your subscription has been canceled, expires on ${new Date(a==null?void 0:a.subscription.expiration_dt).toLocaleDateString()}.`):s.classList.remove("hide"),e.classList.remove("hide"),t.classList.remove("hide")),(r==null?void 0:r.plan.requests_limits.quantity)===1e4&&(e.innerHTML=`You're on the <span class="text-color-green">PRO</span> plan. You have limits of 10000 requests for both web & API.`,t.innerHTML=`You have used ${((l=r==null?void 0:r.requests)==null?void 0:l.total)||0} of 10000 checks via both web & API.`,a!=null&&a.subscription.meta.was_canceled?(s.classList.add("hide"),t.innerHTML=t.innerHTML+` Your subscription has been canceled, expires on ${new Date(a==null?void 0:a.subscription.expiration_dt).toLocaleDateString()}.`):s.classList.remove("hide"),e.classList.remove("hide"),t.classList.remove("hide")),(r==null?void 0:r.plan.requests_limits.quantity)>1e4&&(e.innerHTML=`You're on the <span class="text-color-green">Custom</span> plan. You have limits of ${r==null?void 0:r.plan.requests_limits.quantity} requests for both web & API.`,t.innerHTML=`You have used ${((p=r==null?void 0:r.requests)==null?void 0:p.total)||0} of 10000 checks via both web & API.`,s.innerHTML="Contact US  to update your plan.",s.classList.remove("hide"),e.classList.remove("hide"),t.classList.remove("hide")),s.addEventListener("click",async()=>{(r==null?void 0:r.plan.requests_limits.quantity)>1e4?window.location.href=`https://${window.location.host}/contact-us`:confirm("Are you sure you want to cancel your subscription?")?(alert("Your subscription has been canceled."),Se.cancelSubscription().then(b=>{console.log(b)}),window.location.href=`https://${window.location.host}/#plans`):alert("Your subscription has not been canceled.")})}},v=y;v.instance=null;var P=class{constructor(){}static isAuth(){return localStorage.getItem(P.token_key)!==null}static setAuth(){localStorage.setItem(P.key,"true")}static removeAuth(){localStorage.removeItem(P.key)}static async init(){if(localStorage.getItem("_aion_in")===null)try{await v.signUp(),P.setAuth(),await v.login(),localStorage.setItem("_aion_in","true")}catch(e){console.log(e)}}static getToken(){var e;return(e=localStorage.getItem("_ms-mid"))!=null?e:""}static isExpiredToken(){let e=P.getToken();if((e==null?void 0:e.length)>0){let t=ge(e),s=Date.now()/1e3;return t.exp<s}return!0}static checkAuth(e){if(!P.isAuth()){let t=document.getElementById("sign-up");return t.style.display="flex",t.style.zIndex=100,e(),!0}return!1}},c=P;c.key="isSignUp",c.token_key="_ms-mid";var L=class{constructor(){let e=c.getToken(),t=`${u}/aion/ai-generated`;this.client=new H(t,e)}static getInstance(){return L.instance||(L.instance=new L),L.instance}static async getReportsByBinary(e){let{client:t}=L.getInstance();try{let s=new FormData;return s.append("binary",e,"uploaded-file.png"),await t.postBinary("reports/binary",s)}catch(s){s.status===402&&alert("Please verify your email to continue using the service"),s.status===429&&(alert(`It looks like you have reached your plan limit of ${s.message.msg.current_limit} requests. To continue, please upgrade to a new plan.`),window.location.href=`https://${window.location.host}/#plans`),console.error("Error getReportsByBinary:",s)}}static async getReportsByUrl(e){let{client:t}=L.getInstance();try{let s=`reports/url?url=${e}`;return await t.post(s,{})}catch(s){s.status===402&&alert("Please verify your email to continue using the service"),s.status===429&&(alert(`It looks like you have reached your plan limit of ${s.message.msg.current_limit} requests. To continue, please upgrade to a new plan.`),window.location.href=`https://${window.location.host}/#plans`),console.error("getReportsByUrl:",s)}}static async getAudioVerdict(e){let{client:t}=L.getInstance();try{let s=new FormData;return s.append("file",e),await t.postBinary("reports/audio/binary",s)}catch(s){s.status===402&&alert("Please verify your email to continue using the service"),s.status===429&&(alert(`It looks like you have reached your plan limit of ${s.message.msg.current_limit} requests. To continue, please upgrade to a new plan.`),window.location.href=`https://${window.location.host}/#plans`),console.error("Error getAudioVerdict:",s)}}static async getYoutubeVerdict(e){let{client:t}=L.getInstance();try{let s={url:e};return await t.post("reports/audio/link",s)}catch(s){s.status===402&&alert("Please verify your email to continue using the service"),s.status===429&&(alert(`It looks like you have reached your plan limit of ${s.message.msg.current_limit} requests. To continue, please upgrade to a new plan.`),window.location.href=`https://${window.location.host}/#plans`),console.error("Error getYoutubeVerdict:",s)}}static async getPdetReportByUrl(e){let{client:t}=L.getInstance();try{let s={object:e};return await t.post("reports/person_detection/url",s)}catch(s){s.status===402&&alert("Please verify your email to continue using the service"),s.status===429&&(alert(`It looks like you have reached your plan limit of ${s.message.msg.current_limit} requests. To continue, please upgrade to a new plan.`),window.location.href=`https://${window.location.host}/#plans`),console.error("Error getYoutubeVerdict:",s)}}},T=L;T.instance=null;var B=class{constructor(){}static async getReportsByBinary(e,t){let s=`${u}/results/api/detector/reports/raw?source=web&user_id=${t}`,n=new FormData;n.append("binary",e,"file_name.png");let r={method:"POST",headers:{Accept:"application/json",Authorization:`Bearer ${c.getToken()}`},body:n};return await fetch(s,r).then(a=>a.json())}static async getReportsByUrl(e,t){let s=`${u}/results/api/detector/reports/json?source=web&user_id=${t}`,n={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${c.getToken()}`},body:JSON.stringify({object:e})};return await fetch(s,n).then(r=>r.json())}static async sendFeedback(e,t,s,n=!1){let r={is_proper_predict:t,comment:s},a=`${u}/results/api/detector/reports/result/${e}`,f={method:"PUT",body:JSON.stringify(r),headers:{Accept:"application/json","Content-Type":"application/json"}};(n||!c.isExpiredToken())&&(a=`${u}/aion/ai-generated/reports/${e}`,f={method:"PATCH",body:JSON.stringify(r),headers:{Accept:"application/json","Content-Type":"application/json"}}),await fetch(a,f).then(g=>g.json()).then(g=>console.log(g)).catch(g=>console.error(g))}static async getAudioVerdict(e){let t=`${u}/aion/ai-generated/reports/audio/binary`,s=new FormData;return s.append("file",e),await fetch(t,{method:"POST",headers:{Accept:"application/json",ContentType:"multipart/form-data"},body:s}).then(r=>r.json())}static async getYoutubeVerdict(e){let t=`${u}/aion/ai-generated/reports/audio/link`,s={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({url:e})};return await fetch(t,s).then(n=>n.json())}};var j=class{constructor(){}static isLimitExceeded(){return!!c.isExpiredToken()}static increment(){let e=localStorage.getItem(j.key),t=e===null?1:Number(e)+1;localStorage.setItem(j.key,t.toString())}},k=j;k.key="requestCount";var S=class{static async getReportsByBinary(e,t){return c.isExpiredToken()?await B.getReportsByBinary(e,t):await T.getReportsByBinary(e)}static async getReportsByUrl(e,t){return c.isExpiredToken()?await B.getReportsByUrl(e,t):await T.getReportsByUrl(e)}static async getAudioVerictByFile(e){return await T.getAudioVerdict(e)}static async getAudioVerictMock(e){let s=await((n,r)=>new Promise(a=>{setTimeout(()=>{a(r)},n)}))(1500,e);return JSON.parse(`{
            "id": "41994fdd-0161-43a9-b873-581eccbe6d72",
            "report": {
                "version": "0.0.0",
                "verdict": ${s}
            }
        }`)}static async getYoutubeVerict(e){return c.isExpiredToken()?await B.getYoutubeVerdict(e):await T.getYoutubeVerdict(e)}static async getPdetReportByUrl(e){return await T.getPdetReportByUrl(e)}static async getPdetReportByBinary(e){console.log("getPdetReportByBinary")}static async sendFeedback(e,t,s,n=!1){return await B.sendFeedback(e,t,s,n)}};var X=document.querySelector("#contact-us-submit-button"),Ge=document.querySelector("#name"),Je=document.querySelector("#E-Mail"),Ke=document.querySelector("#Note"),Xe=document.querySelector("#Company");X&&(X.classList.remove("is-disabled"),X.addEventListener("click",async i=>{i.preventDefault();let e={name:Ge.value,email:Je.value,note:Ke.value,company:Xe.value};for(let t in e)if(t!=="company"&&e[t]===""){alert(`Please fill in all required fields ${t}`);return}console.log(e),fetch(`${u}/aion/system/post_message`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(t=>{t.ok?(alert("Thank you for your application! We will contact you shortly."),window.location.href="https://aiornot.com/"):alert("Something went wrong. Please try again.")})}));var Y=()=>{let i=document.querySelector("#bt-pay-free"),e=document.querySelector("#bt-pay-basic"),t=document.querySelector("#bt-pay-pro"),s=document.querySelector("#bt-pay-enterprice"),n=new $;i==null||i.addEventListener("click",()=>{localStorage.getItem("_ms-mid")?window.location.href=`https://${window.location.host}/`:window.location.href=`https://${window.location.host}/signup`}),e==null||e.addEventListener("click",()=>{if(!localStorage.getItem("_ms-mid")){window.location.href=`https://${window.location.host}/signup`;return}n.createPaymentForm(n.PRODUCT_ID_BASE_PLAN.msg),v.fetchSubscriptionData().then(r=>{r!=null&&r.plan?(window.location.href=`https://${window.location.host}/`,alert("You already have a subscription !!!")):n.createPaymentIntent(n.PRODUCT_ID_BASE_PLAN)})}),t==null||t.addEventListener("click",()=>{if(!localStorage.getItem("_ms-mid")){window.location.href=`https://${window.location.host}/signup`;return}n.createPaymentForm(n.PRODUCT_ID_PRO_PLAN.msg),v.fetchSubscriptionData().then(r=>{r!=null&&r.plan?(window.location.href=`https://${window.location.host}/`,alert("You already have a subscription !!!")):n.createPaymentIntent(n.PRODUCT_ID_PRO_PLAN)})}),s==null||s.addEventListener("click",()=>{window.location.href=`https://${window.location.host}/contact-us`})};var be=()=>{var pe,he;let i=document.getElementById("image-tab"),e=document.getElementById("report-screen"),t=document.querySelector("#button-report-submit"),s=document.querySelector("#input-report-comment"),n=document.querySelector("#button-report_true"),r=document.querySelector("#button-report_false"),a=document.querySelector("#button-report_close"),f=document.querySelector("#url-error-message"),g=document.querySelector("#processing_cancel"),m=document.querySelector("#image-file-input"),w=document.querySelector("#ai-or-not-current-image"),C=document.querySelector("#empty-preview-img"),_=document.querySelector("#nsfw-preview-img"),I=document.querySelector("#input-error-text"),l=document.querySelector("#ai-or-not_image-url"),p=document.querySelector("#image-url-aion-submit"),b=document.querySelector("#ai-or-not_dropzone"),E=document.querySelector("#ai-or-not_dropzone-text"),R=document.querySelector("#result-screen_col"),Q=document.querySelector("#share-items-hide"),Qe=document.querySelector("#ai-or-not-dropzone-counter"),et=document.querySelector("#ai-or-not-dropzone-counter-w"),Te=document.querySelectorAll("#image-test-image");document.querySelector("#w-node-_80502d56-29f7-2965-16f1-d6c6c4ebbd86-c4ebbd86").classList.add("hide"),Q.classList.add("hide");function O(){return i.classList.contains("w--current")?"image":"audio"}let U,ee,A,Z;K();let ke=()=>{let o=document.querySelector("#button-report_false-text");o.classList.remove("hide"),o.textContent=o.getAttribute("report-button-text-default_reported"),r.classList.add("is-reported"),n.classList.add("hide")},_e=()=>{let o=document.querySelector("#button-report_true-text");o.classList.remove("hide"),o.textContent=o.getAttribute("report-button-text-default_reported"),n.classList.add("is-reported"),r.classList.add("hide")},Ie=()=>{s.value="";let o=document.querySelector("#button-report_true-text"),d=document.querySelector("#button-report_false-text");d.classList.add("hide"),o.classList.remove("hide"),o.textContent=o.getAttribute("report-button-text-default"),d.textContent=d.getAttribute("report-button-text-default"),n.classList.remove("is-reported"),r.classList.remove("is-reported"),n.classList.remove("hide"),r.classList.remove("hide")},te=o=>{Z=o;let d=document.querySelector('[fs-socialshare-element="url"]'),h=`${c.isExpiredToken()?`${F}/aiornot/`:`${F}/aiornot/users/`}${o}`;d.textContent=h,document.querySelectorAll(".result-screen_share-item").forEach(J=>{J.setAttribute("data-url",h)})},se=()=>{E.textContent="We support jpeg, png, webp, gif, tiff, bmp. 10 Mb of maximum size.",E.classList.remove("text-color-red"),I.textContent="Something went wrong. Try again.",f.classList.add("hide")},ne=()=>{f.classList.remove("hide")},Pe=()=>{f.classList.add("hide")},V=()=>{R.classList.contains("hide")?(E.textContent="File is too large (max 10 MB)",E.classList.add("text-color-red")):(I.textContent="File is too large (max 10 MB)",f.classList.remove("hide"))};m==null||m.addEventListener("change",()=>{let o=m==null?void 0:m.files[0].size,d=10*1024*1024;o>d?(A=!1,V()):(A=!0,se())});let Be=()=>{document.querySelector("#processing-screen").classList.add("hide"),E.classList.add("error"),b.classList.add("red-border"),E.textContent="Something went wrong. Try again."},re=()=>{E.classList.remove("error"),b.classList.remove("red-border"),E.textContent="We support jpeg, png, webp, gif, tiff, bmp. 10 Mb of maximum size."},M=()=>{document.querySelector("#choose-file-row").classList.add("hide"),document.querySelector("#legal-tip").classList.remove("hide"),document.querySelector("#processing-screen").classList.add("hide"),document.querySelector("#hero-home_title-description").classList.remove("hide"),document.querySelector("#hero-home_gallery").classList.remove("hide"),document.querySelector("#ai-or-not_dropzone").classList.remove("hide"),document.querySelector("#hero-home_drop-zone-divider").classList.remove("hide"),document.querySelector("#result-screen_col").classList.add("hide"),document.querySelector("#result-screen_image-wrapper").classList.add("hide"),w.classList.add("hide"),C.classList.remove("hide"),_.classList.remove("hide")},oe=()=>{Ie(),w.src="",Pe(),I.textContent="Something went wrong. Try again.",document.querySelector("#choose-file-row").classList.remove("hide"),document.querySelector("#legal-tip").classList.add("hide"),document.querySelector(".processing-screen_triggers_5").click(),document.querySelector("#processing-screen").classList.remove("hide"),document.querySelector(".processing-screen_triggers_1").click(),document.querySelector("#hero-home_title-description").classList.add("hide"),document.querySelector("#hero-home_gallery").classList.add("hide"),document.querySelector("#ai-or-not_dropzone").classList.add("hide"),document.querySelector("#hero-home_drop-zone-divider").classList.add("hide"),document.querySelector("#result-screen_col").classList.remove("hide"),document.querySelector("#result-screen_image-wrapper").classList.remove("hide")};function ie(o=!1){o?(_.classList.remove("hide"),w.classList.add("hide"),C.classList.add("hide"),Q.classList.add("hide")):(_.classList.add("hide"),w.classList.remove("hide"),C.classList.add("hide")),document.querySelector(".processing-screen_triggers_3").click(),document.querySelector("#processing-screen").classList.add("hide"),document.querySelector(".processing-screen_triggers_5").click(),m.value="",document.querySelector("#ai-or-not_image-url").value=""}let ae=o=>{o==="unknown"?(document.getElementById("title-human").innerHTML="Sorry, but in this case we can't really say if it's AI or Not",document.getElementById("ai-or-not_result-message-50").classList.remove("hide"),document.getElementById("ai-or-not_result-message").classList.add("hide"),document.getElementById("ai-or-not_result-message-50").innerHTML="Probly the uploaded image has most likely been modified or compressed",document.getElementById("title-human").classList.remove("hide"),document.getElementById("title-ai").classList.add("hide")):(document.getElementById("title-ai").innerHTML=`This is likely <span class="text-color-green">AI</span> <div style="font-size: 1rem; color: #FFFFFFB3; font-family: Space Grotesk, sans-serif;">
<span> Free Research Preview. AI or Not may produce inaccurate results </span>
</div>`,document.getElementById("title-human").innerHTML=`This is likely <span class="text-color-green">Human</span><div style="font-size: 1rem; color: #FFFFFFB3; font-family: Space Grotesk, sans-serif;">
<span> Free Research Preview. AI or Not may produce inaccurate results </span>
</div>`,document.getElementById("ai-or-not_result-message-50").classList.add("hide"),document.getElementById("ai-or-not_result-message").classList.remove("hide"),document.querySelector("#ai-or-not_model-name").textContent=o,o==="ai"?(document.getElementById("title-human").classList.add("hide"),document.getElementById("title-ai").classList.remove("hide")):(document.getElementById("title-human").classList.remove("hide"),document.getElementById("title-ai").classList.add("hide")))},le=async()=>{if(k.isLimitExceeded()){let o=document.getElementById("sign-up");o.style.display="flex",o.style.zIndex=100,M()}else f.classList.add("hide"),oe(),await S.getReportsByUrl(U,z).then(o=>{k.increment(),te(o.id),w.src=U,ae(o.verdict),ie(o.nsfw_detected)}).catch(o=>{R.classList.contains("hide")?ne():(ne(),M())})},x=document.body,st=document.querySelector("#dropzone-fullscreen_message-tip"),nt=document.querySelector("#dropzone-fullscreen_message-format");x==null||x.addEventListener("dragover",function(o){o.preventDefault(),document.querySelector(".dropzone-fullscreen").classList.remove("hide")}),x==null||x.addEventListener("dragleave",function(o){o.preventDefault(),document.querySelector(".dropzone-fullscreen").classList.add("hide")}),x==null||x.addEventListener("drop",async function(o){if(O()!=="image")return;o.preventDefault(),document.querySelector(".dropzone-fullscreen").classList.add("hide");let d=o.dataTransfer.files[0],q=d.size,h=10*1024*1024;q>h?(A=!1,V()):(A=!0,se()),A==!0?await ce(d):V()}),m==null||m.addEventListener("change",async o=>{if(A==!0){let d=m;console.log(d);let q=d.files[0];await ce(q)}else V()});let ce=async o=>{if(oe(),k.isLimitExceeded()){let h=document.getElementById("sign-up");h.style.display="flex",h.style.zIndex=100,M();return}let d=document.querySelector("#ai-or-not-current-image"),q=URL.createObjectURL(o);d.setAttribute("src",q),w.classList.remove("hide"),C.classList.add("hide"),await S.getReportsByBinary(o,z).then(h=>{k.increment(),te(h.id),re(),ae(h.verdict),ie(h.nsfw_detected)}).catch(h=>{Be(),M()})};g==null||g.addEventListener("click",function(){re(),M()}),(pe=document.querySelector("#ai-or-not_dropzone"))==null||pe.addEventListener("click",function(){O()==="image"&&(c.checkAuth(M)||(ee="screen_home",m.click()))}),(he=document.querySelector("#choose-file-row"))==null||he.addEventListener("click",function(){O()==="image"&&(ee="screen_result",m.click())}),p==null||p.addEventListener("click",()=>{l.value!=""&&(U=l.value,le())});let N=document.querySelector("#ai-or-not_image-url");N==null||N.addEventListener("keypress",function(o){o.key==="Enter"&&l.value!=""&&(U=l.value,le())}),Te.forEach(o=>{o==null||o.addEventListener("click",()=>{let d=o.getAttribute("test-image-url");document.querySelector("#ai-or-not_image-url").value=d,document.querySelector("#image-url-aion-submit").click(),document.querySelector("#ai-or-not_image-url").value=""})}),n==null||n.addEventListener("click",()=>{_e(),S.sendFeedback(Z,!0,"")}),r==null||r.addEventListener("click",()=>{}),a==null||a.addEventListener("click",()=>{}),t==null||t.addEventListener("click",()=>{S.sendFeedback(Z,!1,s.value),ke()}),document==null||document.addEventListener("keydown",function(o){o.code==="Escape"&&e.style.display!=="none"&&a.click()}),s==null||s.addEventListener("change",()=>{s.value!=""?t.classList.remove("is-disabled"):t.classList.add("is-disabled")}),s==null||s.addEventListener("input",()=>{s.value!=""?t.classList.remove("is-disabled"):t.classList.add("is-disabled")});let de=document.querySelector("#ai-or-not_image-url"),ue=document.querySelector("#image-url-aion-submit");de.addEventListener("input",function(){let o=de.value.trim();Ae(o)?ue.classList.remove("is-disabled"):ue.classList.add("is-disabled")});let Ae=o=>{try{return new URL(o),!0}catch{return!1}},W=document.getElementById("close-sign-up");W==null||W.addEventListener("click",()=>{let o=document.getElementById("sign-up");o.style.display="none",o.style.zIndex=0});let me=document.querySelector("#image-quotas");c.isAuth()&&v.fetchSubscriptionData().then(o=>{var d,q;if(o){let{quantity:h}=((d=o.plan)==null?void 0:d.requests_limits)||{quantity:20},{total:G}=o.requests;if(!o.plan)try{G-=((q=o.api.usage)==null?void 0:q.daily)||0}catch(J){console.log(J)}console.log(o),me.innerHTML=`
            <div style="margin-top: 20px; font-size: 1rem; color: white">
            <span">
                Available ${h-G} from ${h} requests 
            </span>
            </div>`}else me.textContent=""}),Y()};var Ce=()=>{document.querySelector("#processing-screen").classList.remove("hide"),document.querySelector(".processing-screen_triggers_5").click(),document.querySelector(".processing-screen_triggers_1").click()},xe=()=>{document.querySelector("#processing-screen").classList.add("hide")};var qe=()=>{let i=document.querySelectorAll("#pdet-test-image"),e=document.querySelector("#aion-pdet-current-image"),t=document.querySelector("#pdet-empty-preview-img"),s=document.querySelector("#pdet-nsfw-preview-img"),n=document.querySelector("#aion-pdet-image-url"),r=document.querySelector("#aion-pdet-url-submit"),a,f,g,m,w=()=>{var b,E,R;let l=document.querySelector("#button-report_true-text"),p=document.querySelector("#button-report_false-text");p.classList.add("hide"),l.classList.remove("hide"),l.textContent=l.getAttribute("report-button-text-default"),p.textContent=p.getAttribute("report-button-text-default"),(b=document.querySelector("#pdet-hero-home-title-description"))==null||b.classList.add("hide"),(E=document.querySelector("#pdet-hero-home-gallery"))==null||E.classList.add("hide"),(R=document.querySelector("#aion-pdet-dropzone"))==null||R.classList.add("hide")};function C(l=!1,p){var b;w(),xe(),l||(console.log("nsfw_detected",l),s.classList.add("hide"),e.classList.remove("hide"),t.classList.add("hide"),(b=document.querySelector("#result-screen-pdet-wrapper"))==null||b.classList.remove("hide"),e.classList.remove("hide"),e.src=p),n.value=""}let _=async()=>{console.log("pastedUrl",a),await S.getPdetReportByUrl(a).then(l=>{console.log(l),C(l.nsfw_detected,l.url)}).catch(l=>{console.log(l)})};r==null||r.addEventListener("click",()=>{Ce(),n.value!=""&&(a=n.value,_())}),n.addEventListener("input",function(){let l=n.value.trim();I(l)?r.classList.remove("is-disabled"):r.classList.add("is-disabled")});let I=l=>{try{return new URL(l),!0}catch{return!1}};i.forEach(l=>{l.addEventListener("click",()=>{let p=l.getAttribute("test-image-url");n.value=p,r.click(),n.value=""})}),Y()};be();qe();})();
