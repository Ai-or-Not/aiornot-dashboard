<script defer>
	async function initUsagePage() {
		const usage = await DashboardService.fetchUsageApi()
		console.log(usage)

		if (usage.access) {
			const refreshApiTokenButton = document.getElementById('refresh-api-key')
			refreshApiTokenButton.style.display = 'flex !important'
			ElementCreator.fillApiKeyCard(usage)
		} else {
			const getApiTokenButton = document.getElementById('request-api-key')
			getApiTokenButton.style.display = 'flex !important'
			getApiTokenButton.onclick = async () => {
				await DashboardService.fetchApiToken()
				initUsagePage()
			}
		}
	}

	initUsagePage()
</script>
