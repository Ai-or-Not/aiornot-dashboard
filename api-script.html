<script defer>
	async function initUsagePage() {
		const refreshApiTokenButton = document.getElementById('refresh-api-key')
		const getApiTokenButton = document.getElementById('request-api-key')
		refreshApiTokenButton.style.display = 'none'
		getApiTokenButton.style.display = 'none'

		const usage = await DashboardService.fetchUsageApi()

		if (usage.access) {
			refreshApiTokenButton.style.display = 'flex'
			ElementCreator.fillApiKeyCard(usage)
		} else {
			getApiTokenButton.style.display = 'flex'
			getApiTokenButton.onclick = async () => {
				await DashboardService.fetchApiToken()
				initUsagePage()
			}
		}
	}

	initUsagePage()
</script>
